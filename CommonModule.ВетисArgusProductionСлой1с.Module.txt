
Функция ProductType(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.SubProduct("СправочникСсылка")) Тогда
		guid = SubProduct(value, ПоУмолчанию);
		SubProduct = ВетисArgusProduction.GetSubProductByGuid(guid);
		Product = ВетисArgusProduction.GetProductByGuid(SubProduct.productGuid);
		Возврат Product.productType;
		
	ИначеЕсли ТипЗнч(value) = Тип(ВетисИмяСправочника.ProductType("ПеречислениеСсылка")) Тогда
		Если      value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","МясоИМясопродукты")) Тогда
			Возврат 1;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","КормаИКормовыеДобавки")) Тогда
			Возврат 2;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЖивыеЖивотные")) Тогда
			Возврат 3;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЛекарственныеСредства")) Тогда
			Возврат 4;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПищевыеПродукты")) Тогда
			Возврат 5;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","НепищевыеПродуктыИДругое")) Тогда
			Возврат 6;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","РыбаИМорепродукты")) Тогда
			Возврат 7;
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПродукцияНеТребующаяРазрешения")) Тогда
			Возврат 8;
		Иначе
			Возврат ПоУмолчанию;
		КонецЕсли;
	Иначе
		Если      value = "1" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","МясоИМясопродукты"));
		ИначеЕсли value = "2" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","КормаИКормовыеДобавки"));
		ИначеЕсли value = "3" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЖивыеЖивотные"));
		ИначеЕсли value = "4" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЛекарственныеСредства"));
		ИначеЕсли value = "5" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПищевыеПродукты"));
		ИначеЕсли value = "6" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","НепищевыеПродуктыИДругое"));
		ИначеЕсли value = "7" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","РыбаИМорепродукты"));
		ИначеЕсли value = "8" Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПродукцияНеТребующаяРазрешения"));
		Иначе
			Возврат ПоУмолчанию;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция SubProduct(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.SubProduct("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(value, ПоУмолчанию);
	ИначеЕсли ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(value.guid, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(value, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция Product(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.Product("СправочникСсылка")) Тогда
		guid = SubProduct(value, ПоУмолчанию);
		SubProduct = ВетисArgusProduction.GetSubProductByGuid(guid);
		Возврат SubProduct.productGuid;
	Иначе
		//Product не хранится, обратная конверсия невозможна
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

