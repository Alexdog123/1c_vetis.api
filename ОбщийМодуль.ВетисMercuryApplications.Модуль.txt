
// Корневой элемент содержимого заявки на получение актуального списка записей складского журнала.
Функция getStockEntryListRequest(enterpriseIndex = 0, count = 100) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "getStockEntryListRequest"));
	
	_Объект.localTransactionId = Строка(Новый УникальныйИдентификатор);
	_Объект.initiator          = ВетисArgusCommon.User(ВетисПараметрыСоединения.ЛогинХС());
	_Объект.enterpriseGuid     = ВетисПараметрыСоединения.enterpriseGuid(enterpriseIndex);
	_Объект.listOptions        = ВетисBase.ListOptions(count);
	
	Возврат _Объект;
	
КонецФункции

// Объект содержит сведения о результатах обработки запроса на получение актуального списка записей складского журнала.
Функция getStockEntryListResponse(пОбъект) Экспорт
	
	Возврат пОбъект.stockEntryList;
	
КонецФункции


// Корневой элемент содержимого заявки на получение актуального списка записей складского журнала.
Функция getStockEntryChangesListRequest(enterpriseGuid = 0, count = 100) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "getStockEntryListRequest"));
	
	_Объект.localTransactionId = Строка(Новый УникальныйИдентификатор);
	_Объект.initiator          = ВетисArgusCommon.User(ВетисПараметрыСоединения.ЛогинХС());
	_Объект.enterpriseGuid     = ВетисПараметрыСоединения.enterpriseGuid(enterpriseGuid);
	_Объект.listOptions        = ВетисBase.ListOptions(count);
	
	Возврат _Объект;
	
КонецФункции

// Объект содержит сведения о результатах обработки запроса на получение актуального списка записей складского журнала.
Функция getStockEntryChangesListResponse(пОбъект) Экспорт
	
	Возврат пОбъект.stockEntryList;
	
КонецФункции


// Корневой элемент содержимого заявки на получение записи складского журнала по идентификатору.
Функция getStockEntryByGuidRequest(guid, enterpriseIndex = 0) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "getStockEntryListRequest"));
	
	_Объект.localTransactionId = Строка(Новый УникальныйИдентификатор);
	_Объект.initiator          = ВетисArgusCommon.User(ВетисПараметрыСоединения.ЛогинХС());
	_Объект.enterpriseGuid     = ВетисПараметрыСоединения.enterpriseGuid(enterpriseIndex);
	_Объект.GUID               = guid;
	
	Возврат _Объект;
	
КонецФункции

// Объект содержит результат обработки запроса на получение записи складского журнала по глобальному идентификатору.
Функция getStockEntryByGuidResponse(пОбъект) Экспорт
	
	Возврат пОбъект.stockEntry;
	
КонецФункции


#Область IncomingOperation

// Корневой элемент содержимого заявки. Определяет тип заявки и соответствие с описанием в библиотеке типов.
Функция ProcessIncomingConsignmentRequest(delivery, deliveryFacts, discrepancyReport = Неопределено, returnedDelivery = Неопределено) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "ProcessIncomingConsignmentRequest"));
	
	_Объект.localTransactionId = Строка(Новый УникальныйИдентификатор);
	_Объект.initiator          = ВетисArgusCommon.User(ВетисПараметрыСоединения.ЛогинХС());
	_Объект.delivery           = delivery;// Фактические сведения о принимаемой партии продукции и сопровождающих ее документах.
	_Объект.deliveryFacts      = deliveryFacts;// Обобщенный результат приема партии продукции.
	//_Объект.discrepancyReport  = discrepancyReport;// Акт несоответствия
	//_Объект.returnedDelivery   = returnedDelivery;// Сведения о возвращаемой партии.
	
	Возврат _Объект;
	
КонецФункции

// Объект содержит сведения о записях в складском журнале продукции системы Меркурий.
Функция ProcessIncomingConsignmentResponse(пОбъект) Экспорт
	
// http://vetrf.ru/vetrf-forum/posts/list/315/6855.page#39749
// В ответе processIncomingResponse будут отдельные ВСД.
// В случае полного или частичного гашения будут возвращены данные погашенного ВСД и в случае частичного гашения
// также будут возвращены данные возвратного ВСД.
// В случае полного возврата партии возвращаются только данные возвратного сертификата.	
	
	Возврат пОбъект;
	
КонецФункции

#КонецОбласти


Функция ModifyBusinessEntityRequest(type, affectedList, reason) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "ModifyBusinessEntityRequest"));
	
	_Объект.localTransactionId = Строка(Новый УникальныйИдентификатор);
	_Объект.initiator          = ВетисArgusCommon.User(ВетисПараметрыСоединения.ЛогинХС());
	_Объект.modificationOperation = ВетисCerberusEnterprise.BEModificationOperation(type, affectedList, reason);
	
	Возврат _Объект;
	
КонецФункции


Функция URI()
	
	Возврат "http://api.vetrf.ru/schema/cdm/mercury/applications";
	
КонецФункции

