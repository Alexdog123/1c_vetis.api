
// тип, описывающий параметры запрашиваемого у сервиса списка объектов
Функция ListOptions(count = 100, offset = 0) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "ListOptions"));
	
	_Объект.count = count;
	_Объект.offset = offset;
	
	Возврат _Объект;
	
КонецФункции

// тип, описывающий дату и время
// преобразует дату 1с в xd и обратно
Функция ComplexDate(пДата) Экспорт
	
	Если ТипЗнч(пДата) = Тип("Дата") Тогда
		
		_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "ComplexDate"));
		
		_Объект.year  = Формат(Год(пДата), "ЧГ=");
		_Объект.month = Формат(Месяц(пДата),"ЧЦ=2; ЧВН=");
		_Объект.day   = Формат(День(пДата),"ЧЦ=2; ЧВН=");
		_Объект.hour  = "00";
	Иначе
		_свойства = пДата.Свойства();
		_гггг = ?(_свойства.Получить("year") = Неопределено, 1, Число(пДата.year));
		_мм = ?(_свойства.Получить("month") = Неопределено, 1, Число(пДата.month));
		_дд = ?(_свойства.Получить("day") = Неопределено, 1, Число(пДата.day));
		_Объект = Дата(_гггг, _мм, _дд);
	КонецЕсли;
	
	Возврат _Объект;
	
КонецФункции

Функция DataInterval(beginDate, endDate) Экспорт
	
	_Объект = ФабрикаXDTO.Создать(ФабрикаXDTO.Тип(URI(), "DataInterval"));
	
	_Объект.beginDate = ВетисОбщегоНазначения.XMLДатаВремя(beginDate);
	_Объект.endDate   = ВетисОбщегоНазначения.XMLДатаВремя(endDate);
	
	Возврат _Объект;
	
КонецФункции


#Область RegisterModificationType
// тип, описывающий тип операции на изменение реестра

// добавление новой записи
Функция RegisterModificationType_CREATE() Экспорт
	
	Возврат "CREATE";
	
КонецФункции

// Поиск существующей или добавление новой записи
Функция RegisterModificationType_FIND_OR_CREATE() Экспорт
	
	Возврат "FIND_OR_CREATE";
	
КонецФункции

// Внесение изменений в существующую запись
Функция RegisterModificationType_UPDATE() Экспорт
	
	Возврат "UPDATE";
	
КонецФункции

// Удаление существующей записи
Функция RegisterModificationType_DELETE() Экспорт
	
	Возврат "DELETE";
	
КонецФункции

Функция RegisterModificationType_MERGE() Экспорт
	
	Возврат "MERGE";
	
КонецФункции

Функция RegisterModificationType_ATTACH() Экспорт
	
	Возврат "ATTACH";
	
КонецФункции

Функция RegisterModificationType_SPLIT() Экспорт
	
	Возврат "SPLIT";
	
КонецФункции

Функция RegisterModificationType_FORK() Экспорт
	
	Возврат "FORK";
	
КонецФункции

// описание
Функция RegisterModificationTypeОписание(nature) Экспорт
	
	Если nature = RegisterModificationType_CREATE() Тогда
		Возврат "Добавление";
	ИначеЕсли nature = RegisterModificationType_FIND_OR_CREATE() Тогда
		Возврат "Поиск";
	ИначеЕсли nature = RegisterModificationType_UPDATE() Тогда
		Возврат "Внесение изменений";
	ИначеЕсли nature = RegisterModificationType_DELETE() Тогда
		Возврат "Удаление";
	ИначеЕсли nature = RegisterModificationType_MERGE() Тогда
		Возврат "Объединение";
	ИначеЕсли nature = RegisterModificationType_ATTACH() Тогда
		Возврат "Прикрепление";
	ИначеЕсли nature = RegisterModificationType_SPLIT() Тогда
		Возврат "Разделение";
	ИначеЕсли nature = RegisterModificationType_FORK() Тогда
		Возврат "Ответвление";
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

// список
Функция RegisterModificationTypeСписок() Экспорт
	
	_Список = Новый СписокЗначений();
	
	_Список.Добавить(RegisterModificationType_CREATE(),         RegisterModificationTypeОписание(RegisterModificationType_CREATE()));
	_Список.Добавить(RegisterModificationType_FIND_OR_CREATE(), RegisterModificationTypeОписание(RegisterModificationType_FIND_OR_CREATE()));
	_Список.Добавить(RegisterModificationType_UPDATE(),         RegisterModificationTypeОписание(RegisterModificationType_UPDATE()));
	_Список.Добавить(RegisterModificationType_DELETE(),         RegisterModificationTypeОписание(RegisterModificationType_DELETE()));
	_Список.Добавить(RegisterModificationType_MERGE(),          RegisterModificationTypeОписание(RegisterModificationType_MERGE()));
	_Список.Добавить(RegisterModificationType_ATTACH(),         RegisterModificationTypeОписание(RegisterModificationType_ATTACH()));
	_Список.Добавить(RegisterModificationType_SPLIT(),          RegisterModificationTypeОписание(RegisterModificationType_SPLIT()));
	_Список.Добавить(RegisterModificationType_FORK(),           RegisterModificationTypeОписание(RegisterModificationType_FORK()));
	
	Возврат _Список;
	
КонецФункции

#КонецОбласти

#Область VersionStatus

Функция VersionStatusОписание(status) Экспорт
	
	Если status = 100 Тогда
		Возврат "Запись создана";
	ИначеЕсли status = 102 Тогда
		Возврат "Отправлена";
	ИначеЕсли status = 110 Тогда
		Возврат "Запись создана в результате объединения двух или более других";
	ИначеЕсли status = 120 Тогда
		Возврат "Запись создана в результате разделения другой";
	ИначеЕсли status = 200 Тогда
		Возврат "В запись были внесены изменения";
	ИначеЕсли status = 201 Тогда
		Возврат "Запись журнала аннулирована";
	ИначеЕсли status = 202 Тогда
		Возврат "Запись продукции изменена путём списания";
	ИначеЕсли status = 230 Тогда
		Возврат "Запись была обновлена в результате присоединения другой";
	ИначеЕсли status = 240 Тогда
		Возврат "Запись была обновлена в результате отделения от неё другой";
	ИначеЕсли status = 300 Тогда
		Возврат "Запись была перемещена в другую группу";
	ИначеЕсли status = 400 Тогда
		Возврат "Запись была удалена";
	ИначеЕсли status = 410 Тогда
		Возврат "Запись была удалена в результате объединения";
	ИначеЕсли status = 420 Тогда
		Возврат "Запись была удалена в результате разделения";
	ИначеЕсли status = 430 Тогда
		Возврат "Запись была удалена в результате присоединения";
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

Функция VersionStatus_CREATED() Экспорт
	
	Возврат 100;
	
КонецФункции

Функция VersionStatus_SENT() Экспорт
	
	Возврат 102;
	
КонецФункции

Функция VersionStatus_CREATED_WHEN_MERGE() Экспорт
	
	Возврат 110;
	
КонецФункции

Функция VersionStatus_CREATED_WHEN_SPLIT() Экспорт
	
	Возврат 120;
	
КонецФункции

Функция VersionStatus_UPDATED() Экспорт
	
	Возврат 200;
	
КонецФункции

Функция VersionStatus_WITHDRAWN() Экспорт
	
	Возврат 201;
	
КонецФункции

Функция VersionStatus_Списано() Экспорт
	
	Возврат 202;
	
КонецФункции

Функция VersionStatus_UPDATED_WHEN_ATTACH() Экспорт
	
	Возврат 230;
	
КонецФункции

Функция VersionStatus_UPDATED_WHEN_FORK() Экспорт
	
	Возврат 240;
	
КонецФункции

Функция VersionStatus_MOVED() Экспорт
	
	Возврат 300;
	
КонецФункции

Функция VersionStatus_DELETED() Экспорт
	
	Возврат 400;
	
КонецФункции

Функция VersionStatus_DELETED_WHEN_MERGE() Экспорт
	
	Возврат 410;
	
КонецФункции

Функция VersionStatus_DELETED_WHEN_SPLIT() Экспорт
	
	Возврат 420;
	
КонецФункции

Функция VersionStatus_DELETED_WHEN_ATTACH() Экспорт
	
	Возврат 430;
	
КонецФункции

Функция VersionStatusСписок() Экспорт
	
	Список = Новый СписокЗначений();
	
	Список.Добавить(100, VersionStatusОписание(100));
	Список.Добавить(102, VersionStatusОписание(102));
	Список.Добавить(110, VersionStatusОписание(110));
	Список.Добавить(120, VersionStatusОписание(120));
	Список.Добавить(200, VersionStatusОписание(200));
	Список.Добавить(201, VersionStatusОписание(201));
	Список.Добавить(202, VersionStatusОписание(202));
	Список.Добавить(230, VersionStatusОписание(230));
	Список.Добавить(240, VersionStatusОписание(240));
	Список.Добавить(300, VersionStatusОписание(300));
	Список.Добавить(400, VersionStatusОписание(400));
	Список.Добавить(410, VersionStatusОписание(410));
	Список.Добавить(420, VersionStatusОписание(420));
	Список.Добавить(430, VersionStatusОписание(430));
	
	Возврат(Список);
	
КонецФункции 

#КонецОбласти

Функция URI() Экспорт
	
	Возврат "http://api.vetrf.ru/schema/cdm/base";
	
КонецФункции

