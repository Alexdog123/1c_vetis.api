
Функция Unit(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип("СправочникСсылка.КлассификаторЕдиницИзмерения") Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(пСсылка, ПоУмолчанию);
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") ИЛИ ТипЗнч(пСсылка) = Тип("Структура") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка.guid, "Справочник.КлассификаторЕдиницИзмерения", ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка, "Справочник.КлассификаторЕдиницИзмерения", ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция PackingForm(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип("СправочникСсылка.ВетисPackingForm") Тогда
		_Ссылка = пСсылка.guid;
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") ИЛИ ТипЗнч(пСсылка) = Тип("Структура") Тогда
		_Ссылка = Справочники.ВетисPackingForm.НайтиПоРеквизиту("guid", пСсылка.uuid);
	Иначе
		_Ссылка = Справочники.ВетисPackingForm.НайтиПоРеквизиту("guid", пСсылка);
	КонецЕсли;
	
	Если ЗначениеЗаполнено(_Ссылка) ИЛИ ПоУмолчанию = Неопределено Тогда
		Возврат _Ссылка;
	Иначе
		Возврат ПоУмолчанию;
	КонецЕсли;
	
КонецФункции

Функция Purpose(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип("СправочникСсылка.ВетисPurpose") Тогда
		_Ссылка = пСсылка.guid;
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") ИЛИ ТипЗнч(пСсылка) = Тип("Структура") Тогда
		_Ссылка = Справочники.ВетисPurpose.НайтиПоРеквизиту("guid", пСсылка.guid);
	Иначе
		_Ссылка = Справочники.ВетисPurpose.НайтиПоРеквизиту("guid", пСсылка);
	КонецЕсли;
	
	Если ЗначениеЗаполнено(_Ссылка) ИЛИ ПоУмолчанию = Неопределено Тогда
		Возврат _Ссылка;
	Иначе
		Возврат ПоУмолчанию;
	КонецЕсли;
	
КонецФункции
