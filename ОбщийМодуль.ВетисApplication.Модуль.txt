
Функция Application(пФабрика, пОбъект = Неопределено, пИмя = Неопределено) Экспорт
	
	_Объект = пФабрика.Создать(URI(), "Application");
	
	_Объект.serviceId = ВетисПараметрыСоединения.serviceId();
	_Объект.issuerId  = ВетисПараметрыСоединения.issuerId();
	_Объект.issueDate = ТекущаяДата();
	
	Если НЕ пОбъект = Неопределено Тогда
		_Объект.data = ApplicationDataWrapper(пФабрика, пОбъект, пИмя);
	КонецЕсли;
	
	Возврат _Объект;
	
КонецФункции

Функция ApplicationResult(пОбъект) Экспорт
	
	Возврат пОбъект.result;
	
КонецФункции

Функция ApplicationDataWrapper(пФабрика, пОбъект = Неопределено, пИмя = Неопределено) Экспорт
	
	_Объект = пФабрика.Создать(URI(), "ApplicationDataWrapper");
	
	Если НЕ пОбъект = Неопределено Тогда
		
		_Объект.Добавить(ФормаXML.Элемент, пОбъект.Тип().URIПространстваИмен, пИмя, пОбъект);
		
	КонецЕсли;
	
	Возврат _Объект;
	
КонецФункции

Функция ApplicationResultWrapper(пОбъект) Экспорт
	
	Возврат пОбъект.applicationResultData;
	
КонецФункции

Функция receiveApplicationResultRequest(пФабрика, applicationId) Экспорт
	
	_Объект = пФабрика.Создать(ServiceURI(), "receiveApplicationResultRequest");
	
	_Объект.apiKey        = ВетисПараметрыСоединения.apiKey();
	_Объект.issuerId      = ВетисПараметрыСоединения.issuerId();
	_Объект.applicationId = applicationId;
	
	Возврат _Объект;
	
КонецФункции

Функция receiveApplicationResultResponse(пОбъект) Экспорт
	
	Возврат пОбъект.application;
	
КонецФункции


Функция submitApplicationRequest(пФабрика, пApplication = Неопределено) Экспорт
	
	_Объект = пФабрика.Создать(ServiceURI(), "submitApplicationRequest");
	
	_Объект.apiKey      = ВетисПараметрыСоединения.apiKey();
	_Объект.application = пApplication;
	
	Возврат _Объект;
	
КонецФункции

Функция submitApplicationResponse(пОбъект) Экспорт
	
	Возврат пОбъект.application;
	
КонецФункции


Функция ServiceURI()
	
	Возврат "http://api.vetrf.ru/schema/cdm/application/ws-definitions";
	
КонецФункции

Функция URI() Экспорт
	
	Возврат "http://api.vetrf.ru/schema/cdm/application";
	
КонецФункции

