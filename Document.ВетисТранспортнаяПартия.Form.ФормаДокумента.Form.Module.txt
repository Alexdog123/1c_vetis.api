
&НаКлиенте
Процедура ПодборПартий(Команда)
	
	ОткрытьФорму("Документ.ВетисТранспортнаяПартия.Форма.ФормаПодборПартий", Новый Структура("РежимВыбора, Склад", Истина, Объект.Склад), ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаВыбора(ВыбранноеЗначение, ИсточникВыбора)
	
	_ТекущиеДанные = Элементы.Товары.ТекущиеДанные;
	
	_Строки = Объект.Партии.НайтиСтроки(Новый Структура("guid", ВыбранноеЗначение.guid));
	
	Если _Строки.Количество() = 0 Тогда
		_Строка = Объект.Партии.Добавить();
	Иначе
		_Строка = _Строки[0];
	КонецЕсли;
	
	_Строка.КлючСвязи = _ТекущиеДанные.КлючСтроки;
	_Строка.Номенклатура = _ТекущиеДанные.Номенклатура;
	
	_Строка.guid = ВыбранноеЗначение.guid;
	_Строка.Дата = ВыбранноеЗначение.Дата;
	
	_Строка.Количество = ВыбранноеЗначение.Количество;
	_Строка.КоличествоМест = ВыбранноеЗначение.КоличествоМест;
	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьНаСервере()
	
	_Объект = РеквизитФормыВЗначение("Объект");
	
	_Объект.Заполнить(Объект.ДокументОснование);
	
	ЗначениеВРеквизитФормы(_Объект, "Объект");
	
КонецПроцедуры

&НаКлиенте
Процедура Заполнить(Команда)
	
	ЗаполнитьНаСервере();
	
КонецПроцедуры

&НаКлиенте
Процедура ДокументОснованиеПриИзменении(Элемент)
	
	ЗаполнитьНаСервере();
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьТовары(Команда)
	
	//Для каждого _Строка Из Объект.ДокументОснование.Товары Цикл
	//	
	//КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура ТоварыПриАктивизацииСтроки(Элемент)
	
	Если Элементы.Товары.ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Элементы.Партии.ОтборСтрок = Новый ФиксированнаяСтруктура("КлючСвязи", Элементы.Товары.ТекущиеДанные.КлючСтроки);
	
КонецПроцедуры
