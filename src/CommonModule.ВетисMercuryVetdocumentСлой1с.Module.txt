
Функция VetDocumentForm(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисVetDocumentForm") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU1") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERTCU1();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC1") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_LIC1();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU2") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERTCU2();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC2") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_LIC2();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU3") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERTCU3();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC3") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_LIC3();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.NOTE4") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_NOTE4();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU5I") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERT5I();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU61") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERT61();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU62") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERT62();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU63") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_CERT63();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.PRODUCTIVE") Тогда
			Возврат ВетисКонстанты.VetDocumentForm_PRODUCTIVE();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.VetDocumentForm_CERTCU1() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU1");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_LIC1() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC1");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERTCU2() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU2");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_LIC2() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC2");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERTCU3() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU3");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_LIC3() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.LIC3");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_NOTE4() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.NOTE4");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERT5I() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU5I");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERT61() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU61");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERT62() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU62");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_CERT63() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.CERTCU63");
		ИначеЕсли value = ВетисКонстанты.VetDocumentForm_PRODUCTIVE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentForm.PRODUCTIVE");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция VetDocumentStatus(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисVetDocumentStatus") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Оформлен") Тогда
			Возврат ВетисКонстанты.VetDocumentStatus_CONFIRMED();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Аннулирован") Тогда
			Возврат ВетисКонстанты.VetDocumentStatus_WITHDRAWN();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Погашен") Тогда
			Возврат ВетисКонстанты.VetDocumentStatus_UTILIZED();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.VetDocumentStatus_CONFIRMED() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Оформлен");
		ИначеЕсли value = ВетисКонстанты.VetDocumentStatus_WITHDRAWN() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Аннулирован");
		ИначеЕсли value = ВетисКонстанты.VetDocumentStatus_UTILIZED() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Погашен");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция VetDocumentType(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисVetDocumentType") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Входящий") Тогда
			Возврат ВетисКонстанты.VetDocumentType_INCOMING();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Исходящий") Тогда
			Возврат ВетисКонстанты.VetDocumentType_OUTGOING();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Производственный") Тогда
			Возврат ВетисКонстанты.VetDocumentType_PRODUCTIVE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Возвратный") Тогда
			Возврат ВетисКонстанты.VetDocumentType_RETURNABLE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Транспортный") Тогда
			Возврат ВетисКонстанты.VetDocumentType_TRANSPORT();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.VetDocumentType_INCOMING() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Входящий");
		ИначеЕсли value = ВетисКонстанты.VetDocumentType_OUTGOING() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Исходящий");
		ИначеЕсли value = ВетисКонстанты.VetDocumentType_PRODUCTIVE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Производственный");
		ИначеЕсли value = ВетисКонстанты.VetDocumentType_RETURNABLE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Возвратный");
		ИначеЕсли value = ВетисКонстанты.VetDocumentType_TRANSPORT() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Транспортный");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция DeliveryInspectionResult(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисDeliveryInspectionResult") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.CORRESPONDS") Тогда
			Возврат ВетисКонстанты.DeliveryInspectionResult_CORRESPONDS();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.MISMATCH") Тогда
			Возврат ВетисКонстанты.DeliveryInspectionResult_MISMATCH();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.UNSUPERVISED") Тогда
			Возврат ВетисКонстанты.DeliveryInspectionResult_UNSUPERVISED();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.DeliveryInspectionResult_CORRESPONDS() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.CORRESPONDS");
		ИначеЕсли value = ВетисКонстанты.DeliveryInspectionResult_MISMATCH() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.MISMATCH");
		ИначеЕсли value = ВетисКонстанты.DeliveryInspectionResult_UNSUPERVISED() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryInspectionResult.UNSUPERVISED");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция DeliveryDecision(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисDeliveryDecision") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.ACCEPT_ALL") Тогда
			Возврат ВетисКонстанты.DeliveryDecision_ACCEPT_ALL();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.PARTIALLY") Тогда
			Возврат ВетисКонстанты.DeliveryDecision_PARTIALLY();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.RETURN_ALL") Тогда
			Возврат ВетисКонстанты.DeliveryDecision_RETURN_ALL();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.DeliveryDecision_ACCEPT_ALL() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.ACCEPT_ALL");
		ИначеЕсли value = ВетисКонстанты.DeliveryDecision_PARTIALLY() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.PARTIALLY");
		ИначеЕсли value = ВетисКонстанты.DeliveryDecision_RETURN_ALL() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDeliveryDecision.RETURN_ALL");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция UserAuthority(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисUserAuthority") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_WEB_READ") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_ACCESS_WEB_READ();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_WEB_WRITE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_ACCESS_WEB_WRITE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.ARGUS_HS_AUTHORIZED_APPLICANT") Тогда
			Возврат ВетисКонстанты.UserAuthority_ARGUS_HS_AUTHORIZED_APPLICANT();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_API_READ") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_ACCESS_API_READ();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_CONTROL_WORKING_AREA") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_CONTROL_WORKING_AREA();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_API_WRITE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_ACCESS_API_WRITE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_CERTIFICATE_ACCEPTANCE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_CERTIFICATE_ACCEPTANCE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_AUTHORIZED_CERTIFICATE_ACCEPTANCE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_AUTHORIZED_CERTIFICATE_ACCEPTANCE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_AUTHORIZED_RETURNED_CERTIFICATE_CREATION") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_AUTHORIZED_RETURNED_CERTIFICATE_CREATION();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_FISH_CERTIFICATE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_HS_FISH_CERTIFICATE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_PRODUCTION_BATCH_CERTIFICATE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_PRODUCTION_BATCH_CERTIFICATE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_FRESH_MILK_CERTIFICATE") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_HS_FRESH_MILK_CERTIFICATE();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_AUTHORIZED_APPLICANT") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_HS_AUTHORIZED_APPLICANT();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_RETURNED_CERTIFICATE_CREATION") Тогда
			Возврат ВетисКонстанты.UserAuthority_MERCURY_RETURNED_CERTIFICATE_CREATION();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.UserAuthority_MERCURY_ACCESS_WEB_READ() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_WEB_READ");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_ACCESS_WEB_WRITE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_WEB_WRITE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_ARGUS_HS_AUTHORIZED_APPLICANT() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.ARGUS_HS_AUTHORIZED_APPLICANT");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_ACCESS_API_READ() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_API_READ");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_CONTROL_WORKING_AREA() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_CONTROL_WORKING_AREA");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_ACCESS_API_WRITE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_ACCESS_API_WRITE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_CERTIFICATE_ACCEPTANCE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_CERTIFICATE_ACCEPTANCE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_AUTHORIZED_CERTIFICATE_ACCEPTANCE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_AUTHORIZED_CERTIFICATE_ACCEPTANCE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_AUTHORIZED_RETURNED_CERTIFICATE_CREATION() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_AUTHORIZED_RETURNED_CERTIFICATE_CREATION");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_HS_FISH_CERTIFICATE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_FISH_CERTIFICATE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_PRODUCTION_BATCH_CERTIFICATE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_PRODUCTION_BATCH_CERTIFICATE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_HS_FRESH_MILK_CERTIFICATE() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_FRESH_MILK_CERTIFICATE");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_HS_AUTHORIZED_APPLICANT() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_HS_AUTHORIZED_APPLICANT");
		ИначеЕсли value = ВетисКонстанты.UserAuthority_MERCURY_RETURNED_CERTIFICATE_CREATION() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисUserAuthority.MERCURY_RETURNED_CERTIFICATE_CREATION");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции


//начиная с v2.0
Функция TransportInfo(value) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.Transport("СправочникСсылка")) Тогда
		
		_transportType = ВетисDictionaryСлой1с.TransportType(value.ТипТранспорта);
		
		_transportNumber = ВетисMercuryVetdocument_2_0.TransportNumber();
		
		Если _transportType = ВетисКонстанты.TransportType_Автомобильный() Тогда
			_transportNumber.vehicleNumber = value.ГосударственныйНомер;
			_transportNumber.trailerNumber = value.ГосударственныйНомерПрицепа;
		Иначе
			_transportNumber.vehicleNumber = value.ГосударственныйНомер;
		КонецЕсли;
		
		_Объект = ВетисMercuryVetdocument_2_0.TransportInfo(_transportType, _transportNumber);
		
	Иначе
		
		_ТипТранспорта = ВетисDictionaryСлой1с.TransportType(value.transportType);
		
		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ ПЕРВЫЕ 1
		|	_Таблица.Ссылка
		|ИЗ
		|	Справочник."+ВетисИмяСправочника.Transport()+" КАК _Таблица
		|ГДЕ
		|	НЕ _Таблица.ПометкаУдаления
		|	И ВЫБОР
		|			КОГДА _Таблица.ТипТранспорта = ЗНАЧЕНИЕ(Перечисление.ВетисTransportType.ПустаяСсылка)
		|				ТОГДА ЗНАЧЕНИЕ(Перечисление.ВетисTransportType.Автомобильный) = &ТипТранспорта
		|			ИНАЧЕ _Таблица.ТипТранспорта = &ТипТранспорта
		|		КОНЕЦ
		|	И _Таблица.ГосударственныйНомер = &Номер
		//|//онп	И _Таблица.ГосударственныйНомерПрицепа = &НомерПрицепа
		|	И ИСТИНА";
		
		Запрос.УстановитьПараметр("Номер", value.transportNumber.vehicleNumber);
		Запрос.УстановитьПараметр("НомерПрицепа", value.transportNumber.trailerNumber);
		Запрос.УстановитьПараметр("ТипТранспорта", _ТипТранспорта);
		
		//Если ЗначениеЗаполнено(value.transportNumber.trailerNumber) Тогда
		//	Запрос.Текст = СтрЗаменить(Запрос.Текст, "//онп", "");
		//КонецЕсли;
		
		Результат = Запрос.Выполнить();
		Выборка = Результат.Выбрать();
		
		Если Выборка.Следующий() Тогда
			_Объект = Выборка.Ссылка;
		Иначе
			_Объект = ПредопределенноеЗначение(ВетисИмяСправочника.Transport("Справочник","ПустаяСсылка"));
		КонецЕсли;
		
	КонецЕсли;
	
	Возврат _Объект;
	
КонецФункции

Функция VetDocument(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ДокументСсылка.ВетисВетеринарноСопроводительныйДокумент") Тогда
		Возврат value.uuid;
	ИначеЕсли ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		Возврат Документы.ВетисВетеринарноСопроводительныйДокумент.НайтиПоРеквизиту("uuid", value.uuid);
	Иначе
		Возврат Документы.ВетисВетеринарноСопроводительныйДокумент.НайтиПоРеквизиту("uuid", value);
	КонецЕсли;
	
КонецФункции

Функция VetDocumentКонвертировать(value1, value2) Экспорт
	
	Если ТипЗнч(value1) = Тип("ДокументОбъект.ВетисВетеринарноСопроводительныйДокумент")
		ИЛИ ТипЗнч(value1) = Тип("ДанныеФормыСтруктура") Тогда
		
		_док = value1;
		_всд = value2;
		
		_док.uuid     = _всд.uuid;
		
		_док.СерияВСД = _всд.issueSeries;
		_док.НомерВСД = _всд.issueNumber;
		_док.ДатаВСД  = _всд.issueDate;
		_док.Тип      = VetDocumentType(_всд.type);
		_док.Статус   = VetDocumentStatus(_всд.status);
		_док.Форма    = VetDocumentForm(_всд.form);
		
		_док.Отправитель = ВетисCerberusEnterpriseСлой1с.BusinessEntity(_всд.consignor.businessEntity);
		_док.Получатель  = ВетисCerberusEnterpriseСлой1с.BusinessEntity(_всд.consignee.businessEntity);
		
		_док.ОтправительПредприятие = ВетисCerberusEnterpriseСлой1с.Enterprise(_всд.consignor.enterprise);
		_док.ПолучательПредприятие  = ВетисCerberusEnterpriseСлой1с.Enterprise(_всд.consignee.enterprise);
		
		_строкаВСД = ?(_док.ВСД.Количество() = 0, _док.ВСД.Добавить(), _док.ВСД[0]);
		
		//_строкаВСД.Серия    = _всд.issueSeries;
		//_строкаВСД.Номер    = _всд.issueNumber;
		//_строкаВСД.Дата     = _всд.issueDate;
		//_строкаВСД.Тип      = VetDocumentType(_всд.type);
		//_строкаВСД.Статус   = VetDocumentStatus(_всд.status);
		//_строкаВСД.Форма    = VetDocumentForm(_всд.form);
		_строкаВСД.БлагополучиеМестности  = _всд.locationProsperity;
		_строкаВСД.Ветсанэкспертиза       = _всд.cargoExpertized;
		//_строкаВСД.ГосударственныйВетврач = _всд.confirmedBy.fio;
		_строкаВСД.ГосударственныйВетврачДата = ?(_всд.confirmedDate = Неопределено, _строкаВСД.ГосударственныйВетврачДата, Ветис.ВремяМестное(_всд.confirmedDate));// xs:dateTime
		_строкаВСД.Иммунизация            = ?(_всд.immunizationInfo = Неопределено, _строкаВСД.Иммунизация, _всд.immunizationInfo);
		_строкаВСД.КарантированиеДней     = ?(_всд.quarantineDays = Неопределено, _строкаВСД.КарантированиеДней, _всд.quarantineDays);
		_строкаВСД.КарантированиеМесто    = ?(_всд.quarantinePlace = Неопределено, _строкаВСД.КарантированиеДней, _всд.quarantinePlace);
		_строкаВСД.КонтрольГосВетврачем   = ?(_всд.cargoInspected = Неопределено, _строкаВСД.КонтрольГосВетврачем, _всд.cargoInspected);
		_строкаВСД.ЛабораторныеИсследования = _всд.expertiseInfo;
		_строкаВСД.НазначениеГруза        = ВетисArgusCommonСлой1с.Purpose(_всд.purpose);
		_строкаВСД.ОсобыеОтметки          = _всд.specialMarks;
		_строкаВСД.ПредыдущиеВСД          = ?(_всд.precedingVetDocuments = Неопределено, _строкаВСД.ПредыдущиеВСД, _всд.precedingVetDocuments);
		
		_строкаТТН = ?(_док.ТТН.Количество() = 0, _док.ТТН.Добавить(), _док.ТТН[0]);
		
		_строкаТТН.Серия          = _всд.waybillSeries;
		_строкаТТН.Номер          = _всд.waybillNumber;
		_строкаТТН.Дата           = _всд.waybillDate;
		_строкаТТН.Тип            = ВетисArgusShipmentСлой1с.WaybillType(_всд.waybillType);
		_строкаТТН.Посредник      = ?(_всд.broker = Неопределено, _строкаТТН.Посредник, ВетисCerberusEnterpriseСлой1с.BusinessEntity(_всд.broker));
		_строкаТТН.СпособХранения = ВетисArgusShipmentСлой1с.TransportationStorageType(_всд.transportStorageType);
		_строкаТТН.Транспорт      = ВетисArgusShipmentСлой1с.TransportInfo(_всд.transportInfo);
		
		_строкаСЖ = ?(_док.Товары.Количество() = 0, _док.Товары.Добавить(), _док.Товары[0]);
		
		BatchКонвертировать(_строкаСЖ, _всд.batch);
		
	ИначеЕсли ТипЗнч(value2) = Тип("ДокументОбъект.ВетисВетеринарноСопроводительныйДокумент")
		ИЛИ ТипЗнч(value2) = Тип("ДанныеФормыСтруктура") Тогда
		
		_всд = value1;
		_док = value2;
		
		_СтрокаВСД = _док.ВСД[0];
		_СтрокаСЖ  = _док.Товары[0];
		_СтрокаТТН = _док.ТТН[0];
		
		_consignorBusinessEntity = ВетисCerberusEnterpriseСлой1с.BusinessEntity(_док.Отправитель);
		_consignorEnterprise     = ВетисCerberusEnterpriseСлой1с.Enterprise(_док.ОтправительПредприятие);
		
		_consigneeBusinessEntity = ВетисCerberusEnterpriseСлой1с.BusinessEntity(_док.Получатель);
		_consigneeEnterprise     = ВетисCerberusEnterpriseСлой1с.Enterprise(_док.ПолучательПредприятие);
		
		_всд.issueSeries        = _док.СерияВСД;
		_всд.issueNumber        = _док.НомерВСД;
		_всд.issueDate          = _док.ДатаВСД;
		
		_всд.form               = VetDocumentForm(_док.Форма);
		//_всд.type               = VetDocumentType(_док.Тип);
		_всд.consignor          = ВетисCerberusEnterprise.BusinessMember(_consignorBusinessEntity, _consignorEnterprise);
		_всд.consignee          = ВетисCerberusEnterprise.BusinessMember(_consigneeBusinessEntity, _consigneeEnterprise);
		_всд.purpose            = ВетисArgusCommon.Purpose(ВетисArgusCommonСлой1с.Purpose(_СтрокаВСД.НазначениеГруза));
		_всд.broker             = ВетисCerberusEnterprise.BusinessEntity(ВетисCerberusEnterpriseСлой1с.BusinessEntity(_СтрокаТТН.Посредник));
		_всд.transportInfo      = ВетисArgusShipmentСлой1с.TransportInfo(_СтрокаТТН.Транспорт);
		_всд.transportStorageType = ВетисArgusShipmentСлой1с.TransportationStorageType(_СтрокаТТН.СпособХранения);
		_всд.cargoInspected     = _СтрокаВСД.КонтрольГосВетврачем;
		_всд.cargoExpertized    = _СтрокаВСД.Ветсанэкспертиза;
		_всд.expertiseInfo      = _СтрокаВСД.ЛабораторныеИсследования;
		//Указываются только для бумажных ветеринарных сертификатов.
		//_всд.confirmedBy        = Ветис.Врач();
		_всд.confirmedDate      = Ветис.ВремяСервиса(_док.ДатаВСД);// xs:dateTime
		_всд.locationProsperity = _СтрокаВСД.БлагополучиеМестности;
		_всд.quarantinePlace    = _СтрокаВСД.КарантированиеМесто;
		_всд.quarantineDays     = _СтрокаВСД.КарантированиеДней;
		_всд.immunizationInfo   = _СтрокаВСД.Иммунизация;
		//_всд.precedingVetDocuments = _СтрокаВСД.ПредыдущиеВСД;
		//_всд.importPermit       = ВетисArgusCommon.Document(всдРазрешениеНаВвозНазвание, всдРазрешениеНаВвозСерия, всдРазрешениеНаВвозНомер, всдРазрешениеНаВвозДата);
		//_всд.transferPermit     = ВетисArgusCommon.Document(всдРазрешениеНаВывозНазвание, всдРазрешениеНаВывозСерия, всдРазрешениеНаВывозНомер, всдРазрешениеНаВывозДата);
		_всд.specialMarks       = _СтрокаВСД.ОсобыеОтметки;
		
		_всд.batch = ВетисMercuryVetdocument.Batch();
		
		BatchКонвертировать(_всд.batch, _СтрокаСЖ);
		
	КонецЕсли;
	
КонецФункции

Функция VetDocumentКонвертировать_20(value1, value2) Экспорт
	
	Если ТипЗнч(value1) = Тип("ДокументОбъект.ВетисВетеринарноСопроводительныйДокумент")
		ИЛИ ТипЗнч(value1) = Тип("ДанныеФормыСтруктура") Тогда
		_док = value1;
		_всд = value2;
		
		_док.uuid     = _всд.uuid;
		
		_док.СерияВСД = _всд.issueSeries;
		_док.НомерВСД = _всд.issueNumber;
		_док.ДатаВСД  = _всд.issueDate;
		_док.Тип      = VetDocumentType(_всд.vetDType);
		_док.Статус   = VetDocumentStatus(_всд.vetDStatus);
		_док.Форма    = VetDocumentForm(_всд.vetDForm);
		
		_док.Отправитель = ВетисDictionaryСлой1с.BusinessEntity(_всд.certifiedConsignment.consignor.businessEntity);
		_док.Получатель  = ВетисDictionaryСлой1с.BusinessEntity(_всд.certifiedConsignment.consignee.businessEntity);
		
		_док.ОтправительПредприятие = ВетисDictionaryСлой1с.Enterprise(_всд.certifiedConsignment.consignor.enterprise);
		_док.ПолучательПредприятие  = ВетисDictionaryСлой1с.Enterprise(_всд.certifiedConsignment.consignee.enterprise);
		
		_СтрокаВСД = ?(_док.РезультатыОсмотра.Количество() = 0, _док.РезультатыОсмотра.Добавить(), _док.РезультатыОсмотра[0]);
		_СтрокаВСД.НазначениеГруза        = ВетисDictionaryСлой1с.Purpose(_всд.authentication.purpose);
		_СтрокаВСД.КонтрольГосВетврачем   = _всд.authentication.cargoInspected;
		_СтрокаВСД.Ветсанэкспертиза       = ВетисDictionaryСлой1с.ResearchResult(_всд.authentication.cargoExpertized);
		_СтрокаВСД.БлагополучиеМестности  = _всд.authentication.locationProsperity;
		_СтрокаВСД.ОсобыеОтметки          = _всд.authentication.specialMarks;
		
		_док.Иммунизация.Очистить();
		Для каждого _immunization Из _всд.authentication.immunization Цикл
			_Строка = _док.Иммунизация.Добавить();
			_Строка.Заболевание  = _immunization.disease.name;
			_Строка.Вакцина      = ?(ЗначениеЗаполнено(_immunization.medicinalDrug.ID), _immunization.medicinalDrug.ID, _immunization.medicinalDrug.name);
			_Строка.СрокДействия = _immunization.effectiveBeforeDate;
		КонецЦикла;
		
		_док.ЛабораторныеИсследования.Очистить();
		Для каждого _laboratoryResearch Из _всд.authentication.laboratoryResearch Цикл
			_Строка = _док.ЛабораторныеИсследования.Добавить();
			_Строка.ИДПартии               = _laboratoryResearch.batchID;
			_Строка.НомерЭкспертизы        = _laboratoryResearch.expertiseID;
			_Строка.ПоказательБезопасности = _laboratoryResearch.indicator.name;
			_Строка.Заболевание            = _laboratoryResearch.disease.name;
			_Строка.МетодИсследования      = _laboratoryResearch.method.name;
			_Строка.РезультатИсследования  = ВетисDictionaryСлой1с.ResearchResult(_laboratoryResearch.result);
			_Строка.Заключение             = _laboratoryResearch.conclusion;
		КонецЦикла;
		
		_СтрокаТТН = ?(_док.ТТН.Количество() = 0, _док.ТТН.Добавить(), _док.ТТН[0]);
		_СтрокаТТН.Посредник      = ВетисDictionaryСлой1с.BusinessEntity(_всд.certifiedConsignment.broker);
		_СтрокаТТН.СпособХранения = ВетисDictionaryСлой1с.TransportationStorageType(_всд.certifiedConsignment.transportStorageType);
		_СтрокаТТН.Транспорт      = TransportInfo(_всд.certifiedConsignment.transportInfo);
		
		_док.МаршрутСледования.Очистить();
		Если НЕ _всд.certifiedConsignment.shipmentRoute = Неопределено Тогда
			Для каждого _point Из _всд.certifiedConsignment.shipmentRoute Цикл
				_Строка = _док.МаршрутСледования.Добавить();
				_Строка.ПунктПерегрузки = _point.location.name;
				_Строка.Предприятие     = ВетисDictionaryСлой1с.Enterprise(_point.enterprise);
				_Строка.ЕстьПерегрузка  = _point.transshipment;
				_Строка.Транспорт       = TransportInfo(_point.nextTransport);
			КонецЦикла;
		КонецЕсли;
		
		_док.СвязанныеДокументы.Очистить();
		Если НЕ _всд.referencedDocument = Неопределено Тогда
			Для каждого _document Из _всд.referencedDocument Цикл
				_Строка = _док.СвязанныеДокументы.Добавить();
				_Строка.Серия = _document.issueSeries;
				_Строка.Номер = _document.issueNumber;
				_Строка.Дата = _document.issueDate;
				_Строка.Тип = ВетисDictionaryСлой1с.DocumentType(_document.type);
				_Строка.ТипОтношения = ВетисDictionaryСлой1с.ReferenceType(_document.relationshipType);
				
				//пробую так сделать, возможно здесь есть недостающие сведения о ТТН
				Если _Строка.Тип = Перечисления.ВетисDocumentType.ТовароТранспортнаяНакладная Тогда
					_СтрокаТТН.Серия = _Строка.Серия;
					_СтрокаТТН.Номер = _Строка.Номер;
					_СтрокаТТН.Дата = _Строка.Дата;
					_СтрокаТТН.Тип = _Строка.Тип;
				КонецЕсли;
				
			КонецЦикла;
		КонецЕсли;
		
		_СтрокаСЖ = ?(_док.Товары.Количество() = 0, _док.Товары.Добавить(), _док.Товары[0]);
		
		BatchКонвертировать_20(_СтрокаСЖ, _всд.certifiedConsignment.batch, _док.Упаковка);
		
	ИначеЕсли ТипЗнч(value2) = Тип("ДокументОбъект.ВетисВетеринарноСопроводительныйДокумент")
		ИЛИ ТипЗнч(value2) = Тип("ДанныеФормыСтруктура") Тогда
		
		_всд = value1;
		_док = value2;
		
		_СтрокаВСД = ?(_док.РезультатыОсмотра.Количество() = 0, _док.РезультатыОсмотра.Добавить(), _док.РезультатыОсмотра[0]);
		_СтрокаСЖ  = ?(_док.Товары.Количество() = 0, _док.Товары.Добавить(), _док.Товары[0]);
		_СтрокаТТН = ?(_док.ТТН.Количество() = 0, _док.ТТН.Добавить(), _док.ТТН[0]);
		
		_consignorBusinessEntity = ВетисDictionaryСлой1с.BusinessEntity(_док.Отправитель);
		_consignorEnterprise     = ВетисDictionaryСлой1с.Enterprise(_док.ОтправительПредприятие);
		
		_consigneeBusinessEntity = ВетисDictionaryСлой1с.BusinessEntity(_док.Получатель);
		_consigneeEnterprise     = ВетисDictionaryСлой1с.Enterprise(_док.ПолучательПредприятие);
		
		_batch = ВетисMercuryVetdocument_2_0.Batch();
		
		BatchКонвертировать_20(_batch, _СтрокаСЖ, _док.Упаковка);
		
		_всд.issueSeries          = _док.СерияВСД;
		_всд.issueNumber          = _док.НомерВСД;
		_всд.issueDate            = _док.ДатаВСД;
		_всд.vetDForm             = VetDocumentForm(_док.Форма);
		
		_всд.certifiedConsignment = ВетисMercuryVetdocument_2_0.CertifiedConsignment(
			ВетисDictionary_2_0.BusinessMember(_consignorBusinessEntity, _consignorEnterprise),
			ВетисDictionary_2_0.BusinessMember(_consigneeBusinessEntity, _consigneeEnterprise),
			_batch,
			ВетисDictionary_2_0.BusinessEntity(ВетисDictionaryСлой1с.BusinessEntity(_СтрокаТТН.Посредник)),
			TransportInfo(_СтрокаТТН.Транспорт),
			ВетисDictionaryСлой1с.TransportationStorageType(_СтрокаТТН.СпособХранения)
			//сделать: добавить маршрут
			);
		
		_всд.authentication = ВетисMercuryVetdocument_2_0.VeterinaryAuthentication(
			ВетисDictionary_2_0.Purpose(ВетисDictionaryСлой1с.Purpose(_СтрокаВСД.НазначениеГруза)),
			_СтрокаВСД.КонтрольГосВетврачем,
			ВетисDictionaryСлой1с.ResearchResult(_СтрокаВСД.Ветсанэкспертиза),
			_СтрокаВСД.БлагополучиеМестности,
			_СтрокаВСД.ОсобыеОтметки
			);
		
		_всд.statusChange.Добавить(ВетисMercuryVetdocument_2_0.VetDocumentStatusChange());
		
		Для каждого _Строка Из _всд.СвязанныеДокументы Цикл
			_всд.referencedDocument.Добавить(ВетисMercuryVetdocument_2_0.ReferencedDocument(
				ВетисDictionaryСлой1с.ReferenceType(_Строка.ТипОтношения),
				_Строка.Серия, _Строка.Номер, _Строка.Дата,
				ВетисDictionaryСлой1с.DocumentType(_Строка.Тип)
				));
		КонецЦикла;
		
	КонецЕсли;
	
КонецФункции

Функция BatchКонвертировать(value1, value2) Экспорт
	
	Если ТипЗнч(value1) = Тип("ДокументТабличнаяЧастьСтрока.ВетисВетеринарноСопроводительныйДокумент.Товары")
		ИЛИ ТипЗнч(value1) = Тип("ДанныеФормыЭлементКоллекции") Тогда
		
		_СтрокаСЖ = value1;
		_batch    = value2;
		
		_строкаСЖ.SubProductGuid       = _batch.subProduct.guid;
		_строкаСЖ.ProductItemName      = _batch.productItem.name;
		_строкаСЖ.ProductItemGuid      = _batch.productItem.guid;
		
		_строкаСЖ.НоменклатурнаяГруппа = ВетисArgusProductionСлой1с.SubProduct(_batch.subProduct);
		_строкаСЖ.Количество           = _batch.volume;
		_строкаСЖ.ЕдиницаИзмерения     = ВетисArgusCommonСлой1с.Unit(_batch.unit);
		_строкаСЖ.ДатаВыработкиНачало  = ВетисBase.ComplexDate(_batch.dateOfProduction.firstDate);
		_строкаСЖ.ДатаВыработкиКонец   = ВетисBase.ComplexDate(_batch.dateOfProduction.secondDate);
		_строкаСЖ.СрокГодностиНачало   = ВетисBase.ComplexDate(_batch.expiryDate.firstDate);
		_строкаСЖ.СрокГодностиКонец    = ВетисBase.ComplexDate(_batch.expiryDate.secondDate);
		_строкаСЖ.Скоропортящаяся      = _batch.perishable;
		_строкаСЖ.Собственник          = ВетисCerberusEnterpriseСлой1с.BusinessEntity(_batch.owner);
		_строкаСЖ.НекачественныйГруз   = _batch.lowGradeCargo;
		
		_строкаСЖ.Упаковка             = ВетисArgusCommonСлой1с.PackingForm(_batch.packingList);
		_строкаСЖ.КоличествоМест       = _batch.packingAmount;
		_строкаСЖ.СтранаПроисхождения  = ВетисIkarСлой1с.Country(_batch.countryOfOrigin);
		_строкаСЖ.ПроизводительПредприятие = ВетисCerberusEnterpriseСлой1с.Producer(_batch.producerList);
		_строкаСЖ.Номенклатура         = ВетисArgusProductionСлой1с.ProductItem(_batch.productItem, _строкаСЖ.ПроизводительПредприятие);
		//_строкаСЖ.Маркировка           = ProductMarking(_batch.productMarkingList);
		
	ИначеЕсли ТипЗнч(value2) = Тип("ДокументТабличнаяЧастьСтрока.ВетисВетеринарноСопроводительныйДокумент.Товары")
		ИЛИ ТипЗнч(value2) = Тип("ДанныеФормыЭлементКоллекции") Тогда
		
		_batch    = value1;
		_СтрокаСЖ = value2;
		
		//сделать: проверить конверсию номенклатуры
		
		_productItem = ВетисArgusProductionСлой1с.ProductItem(_СтрокаСЖ.Номенклатура, _СтрокаСЖ.ПроизводительПредприятие);//Структура
		_subProduct  = ВетисArgusProductionСлой1с.SubProduct(_СтрокаСЖ.НоменклатурнаяГруппа);
		_product     = "";
		_productType = ВетисКонстанты.ProductType_МясоИМясопродукты();
		
		Если ЗначениеЗаполнено(_productItem.guid) Тогда
			_productItem = ВетисProductService.GetProductItemByGuid(_productItem.guid);//ОбъектXDTO
			_subProduct  = _productItem.subProduct;
			_product     = _productItem.product;
			_productType = _productItem.productType;
			
		ИначеЕсли НЕ ПустаяСтрока(_subProduct) Тогда
			_subProduct  = ВетисProductService.GetSubProductByGuid(_subProduct);
			_product     = ВетисProductService.GetProductByGuid(_subProduct.productGuid);
			_productType = _product.productType;
			_productItem.name = ?(ЗначениеЗаполнено(_productItem.name), _productItem.name, _subProduct.name);
			
		Иначе
			//не заполнены ключевые поля, выходим
			Возврат Неопределено;
		КонецЕсли;
		
		_batch.productType      = _productType;
		_batch.product          = ВетисArgusProduction.Product(_product.guid);
		_batch.subProduct       = ВетисArgusProduction.SubProduct(_subProduct.guid);
		//_batch.productItem      = ВетисArgusProduction.ProductItem(_productItem.guid, _productItem.name);
		_batch.volume           = _СтрокаСЖ.Количество;
		_batch.unit             = ВетисArgusCommon.Unit(ВетисArgusCommonСлой1с.Unit(_СтрокаСЖ.ЕдиницаИзмерения));
		_batch.dateOfProduction = ВетисMercuryVetdocument.GoodsDate(_СтрокаСЖ.ДатаВыработкиНачало, _СтрокаСЖ.ДатаВыработкиКонец, _СтрокаСЖ.Скоропортящаяся);
		_batch.expiryDate       = ВетисMercuryVetdocument.GoodsDate(_СтрокаСЖ.СрокГодностиНачало, _СтрокаСЖ.СрокГодностиКонец, _СтрокаСЖ.Скоропортящаяся);
		_batch.perishable       = _СтрокаСЖ.Скоропортящаяся;
		_batch.lowGradeCargo    = _СтрокаСЖ.НекачественныйГруз;
		_batch.owner            = ВетисCerberusEnterprise.BusinessEntity(ВетисCerberusEnterpriseСлой1с.BusinessEntity(_строкаСЖ.Собственник));
		
		//MERC13098 - Наименование продукции в ветеринарно-сопроводительном документе обязательно для заполнения.
		Если ЗначениеЗаполнено(_productItem.guid) ИЛИ ЗначениеЗаполнено(_productItem.name) Тогда
			_batch.productItem = ВетисArgusProduction.ProductItem(_productItem.guid, _productItem.name);
		КонецЕсли;
		
		//_batch.productItem      = ВетисArgusProduction.ProductItem(_productItem.guid, _productItem.name);
		_batch.packingList      = ВетисArgusCommon.PackingFormList(ВетисArgusCommonСлой1с.PackingForm(_СтрокаСЖ.Упаковка));
		_batch.packingAmount    = _СтрокаСЖ.КоличествоМест;
		_batch.countryOfOrigin  = ВетисIkar.Country(ВетисIkarСлой1с.Country(_СтрокаСЖ.СтранаПроисхождения));
		_batch.producerList     = ВетисCerberusEnterprise.ProducerList(ВетисCerberusEnterpriseСлой1с.Enterprise(_СтрокаСЖ.ПроизводительПредприятие));
		_batch.productMarkingList = ВетисMercuryVetdocument.ProductMarkingList(_СтрокаСЖ.Маркировка);
		
	КонецЕсли;
	
КонецФункции

Функция BatchКонвертировать_20(value1, value2, пУпаковка) Экспорт
	
	Если ТипЗнч(value1) = Тип("ДокументТабличнаяЧастьСтрока.ВетисВетеринарноСопроводительныйДокумент.Товары")
		ИЛИ ТипЗнч(value1) = Тип("ДанныеФормыЭлементКоллекции") Тогда
		
		_СтрокаСЖ = value1;
		_batch    = value2;
		
		_строкаСЖ.SubProductGuid       = _batch.subProduct.guid;
		_строкаСЖ.ProductItemName      = _batch.productItem.name;
		_строкаСЖ.ProductItemGuid      = _batch.productItem.guid;
		
		_строкаСЖ.НоменклатурнаяГруппа = ВетисDictionaryСлой1с.SubProduct(_batch.subProduct);
		_строкаСЖ.Количество           = _batch.volume;
		_строкаСЖ.ЕдиницаИзмерения     = ВетисDictionaryСлой1с.Unit(_batch.unit);
		_строкаСЖ.ДатаВыработкиНачало  = ВетисDictionary_2_0.ComplexDate(_batch.dateOfProduction.firstDate);
		_строкаСЖ.ДатаВыработкиКонец   = ВетисDictionary_2_0.ComplexDate(_batch.dateOfProduction.secondDate);
		_строкаСЖ.СрокГодностиНачало   = ВетисDictionary_2_0.ComplexDate(_batch.expiryDate.firstDate);
		_строкаСЖ.СрокГодностиКонец    = ВетисDictionary_2_0.ComplexDate(_batch.expiryDate.secondDate);
		_строкаСЖ.Скоропортящаяся      = _batch.perishable;
		_строкаСЖ.Собственник          = ВетисDictionaryСлой1с.BusinessEntity(_batch.owner);
		_строкаСЖ.НекачественныйГруз   = _batch.lowGradeCargo;
		
		пУпаковка.Очистить();
		Если НЕ _batch.packageList = Неопределено Тогда
			Для каждого _package Из _batch.packageList.package Цикл
				_СтрокаУпаковка = пУпаковка.Добавить();
				_СтрокаУпаковка.Уровень = ВетисDictionaryСлой1с.PackageLevelType(_package.level);
				_СтрокаУпаковка.ТипУпаковки = ВетисDictionaryСлой1с.PackingType(_package.packingType);
				_СтрокаУпаковка.Количество = _package.quantity;
				_Маркировка = ВетисDictionaryСлой1с.ProductMarks(_package.productMarks);
				_СтрокаУпаковка.Маркировка = _Маркировка.content;
				_СтрокаУпаковка.КлассМаркировки = _Маркировка.class;
			КонецЦикла;
		КонецЕсли;
		
		Если НЕ _batch.origin = Неопределено Тогда
			_строкаСЖ.ПроизводительПредприятие = ВетисDictionaryСлой1с.Producer(_batch.origin.producer);
			_строкаСЖ.Номенклатура             = ВетисDictionaryСлой1с.ProductItem(_batch.productItem, _строкаСЖ.ПроизводительПредприятие);
			_строкаСЖ.СтранаПроисхождения      = ВетисDictionaryСлой1с.Country(_batch.origin.country);
		КонецЕсли;
		
		_ИДПартии = "";
		Для каждого batchID Из _batch.batchID Цикл
			_ИДПартии = _ИДПартии + "; " + batchID;
		КонецЦикла;
		
		_СтрокаСЖ.ИДПартии = Сред(_ИДПартии, 3);
		
	ИначеЕсли ТипЗнч(value2) = Тип("ДокументТабличнаяЧастьСтрока.ВетисВетеринарноСопроводительныйДокумент.Товары")
		ИЛИ ТипЗнч(value2) = Тип("ДанныеФормыЭлементКоллекции") Тогда
		
		_batch    = value1;
		_СтрокаСЖ = value2;
		
		//сделать: проверить конверсию номенклатуры
		
		_productItem = ВетисDictionaryСлой1с.ProductItem(_СтрокаСЖ.Номенклатура, _СтрокаСЖ.ПроизводительПредприятие);//Структура
		_subProduct  = ВетисDictionaryСлой1с.SubProduct(_СтрокаСЖ.НоменклатурнаяГруппа);
		_product     = "";
		_productType = ВетисКонстанты.ProductType_МясоИМясопродукты();
		
		Если ЗначениеЗаполнено(_productItem.guid) Тогда
			_productItem = ВетисProductService_2_0.GetProductItemByGuid(_productItem.guid);//ОбъектXDTO
			_subProduct  = _productItem.subProduct;
			_product     = _productItem.product;
			_productType = _productItem.productType;
			
		ИначеЕсли НЕ ПустаяСтрока(_subProduct) Тогда
			_subProduct  = ВетисProductService_2_0.GetSubProductByGuid(_subProduct);
			_product     = ВетисProductService_2_0.GetProductByGuid(_subProduct.productGuid);
			_productType = _product.productType;
			_productItem.name = ?(ЗначениеЗаполнено(_productItem.name), _productItem.name, _subProduct.name);
			
		Иначе
			//не заполнены ключевые поля, выходим
			Возврат Неопределено;
		КонецЕсли;
		
		_batch.productType      = _productType;
		_batch.product          = ВетисDictionary_2_0.Product(_product.guid);
		_batch.subProduct       = ВетисDictionary_2_0.SubProduct(_subProduct.guid);
		//_batch.productItem      = ВетисDictionary_2_0.ProductItem(_productItem.guid, _productItem.name);
		_batch.volume           = _СтрокаСЖ.Количество;
		_batch.unit             = ВетисDictionary_2_0.Unit(ВетисDictionaryСлой1с.Unit(_СтрокаСЖ.ЕдиницаИзмерения));
		
		//Для скоропортящейся продукции обязательны к указанию год/месяц/день и могут быть указаны час/минута.
		//Для не скоропортящейся продукции обязательны к указанию год/месяц и может быть указан день.
		//Для не скоропортящейся продукции дата выработки и дата окончания срока годности должны быть заданы в одном формате
		//(например, если дата выработки указывается как год/месяц, то указать дату окончания срока годности как год/месяц/день нельзя).
		_batch.dateOfProduction = ВетисMercuryVetdocument_2_0.GoodsDate(_СтрокаСЖ.ДатаВыработкиНачало, _СтрокаСЖ.ДатаВыработкиКонец, _СтрокаСЖ.Скоропортящаяся, _СтрокаСЖ.Скоропортящаяся);
		
		//Не указывается для типа продукции "Живые животные"
		//Для скоропортящейся продукции обязательны к указанию год/месяц/день и могут быть указаны час/минута.
		//Для не скоропортящейся продукции обязательны к указанию год/месяц и может быть указан день.
		//Для не скоропортящейся продукции дата выработки и дата окончания срока годности должны быть заданы в одном формате
		//(например, если дата выработки указывается как год/месяц, то указать дату окончания срока годности как год/месяц/день нельзя).
		_batch.expiryDate       = ВетисMercuryVetdocument_2_0.GoodsDate(_СтрокаСЖ.СрокГодностиНачало, _СтрокаСЖ.СрокГодностиКонец, _СтрокаСЖ.Скоропортящаяся, _СтрокаСЖ.Скоропортящаяся);
		
		_batch.perishable       = _СтрокаСЖ.Скоропортящаяся;
		_batch.lowGradeCargo    = _СтрокаСЖ.НекачественныйГруз;
		_batch.owner            = ВетисDictionary_2_0.BusinessEntity(ВетисDictionaryСлой1с.BusinessEntity(_строкаСЖ.Собственник));
		
		//MERC13098 - Наименование продукции в ветеринарно-сопроводительном документе обязательно для заполнения.
		Если ЗначениеЗаполнено(_productItem.guid) ИЛИ ЗначениеЗаполнено(_productItem.name) Тогда
			_batch.productItem = ВетисDictionary_2_0.ProductItem(_productItem.guid, _productItem.name);
		КонецЕсли;
		
		//MERC13265 - В ветеринарно-сопроводительном документе должен быть указан хотя бы один производитель продукции.
		//MERC13219 - Страна происхождения продукции в ветеринарно-сопроводительном документе обязательна для заполнения.
		_batch.origin = ВетисMercuryVetdocument_2_0.BatchOrigin(
			ВетисDictionary_2_0.ProductItem(_productItem.guid, _productItem.name),
			ВетисDictionary_2_0.Country(ВетисDictionaryСлой1с.Country(_СтрокаСЖ.СтранаПроисхождения)),
			ВетисDictionary_2_0.Producer(ВетисDictionaryСлой1с.Producer(_СтрокаСЖ.ПроизводительПредприятие))
			);
		
		//MERC14245 - Так как маркировка в сведениях о принимаемой партии не совпадает с указанной в ветеринарно-сопроводительном документе, то необходимо указать причину в акте о несоответствии.
		_список = Новый Массив;
		Для каждого _СтрокаУпаковка Из пУпаковка Цикл
			_список.Добавить(ВетисDictionary_2_0.Package(
				ВетисDictionaryСлой1с.PackageLevelType(_СтрокаУпаковка.Уровень),
				ВетисDictionary_2_0.PackingType(ВетисDictionaryСлой1с.PackingType(_СтрокаУпаковка.ТипУпаковки)),
				_СтрокаУпаковка.Количество,
				ВетисDictionary_2_0.ProductMarks(_СтрокаУпаковка.Маркировка, ВетисDictionaryСлой1с.ProductMarkingClass(_СтрокаУпаковка.КлассМаркировки))
				));
		КонецЦикла;
		
		_batch.packageList = ВетисDictionary_2_0.PackageList(_список);
		
		_batch.batchID.Очистить();
		_batch.batchID.Добавить(_СтрокаСЖ.ИДПартии);
		
	КонецЕсли;
	
КонецФункции

Процедура Аннулировать(пСсылка, пПричина, пОтказ = Ложь, пОшибка = "") Экспорт
	
	ВетисMercuryApplicationsСлой1с.WithdrawVetDocumentOperation(пСсылка, пПричина, пОтказ, пОшибка);
	
КонецПроцедуры
