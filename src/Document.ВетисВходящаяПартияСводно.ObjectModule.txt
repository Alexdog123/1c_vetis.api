
Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	РезультатВетКонтроля = Перечисления.ВетисDeliveryInspectionResult.CORRESPONDS;
	
	РезультатПриема = Перечисления.ВетисDeliveryInspectionResult.CORRESPONDS;
	
	РешениеОПриеме = Перечисления.ВетисDeliveryDecision.ACCEPT_ALL;
	
КонецПроцедуры

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	_Таблица.guid КАК guid,
	|	_Таблица.Ссылка.Дата КАК Период,
	|	_Таблица.ВСД КАК ВСД,
	|	_Таблица.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	|	_Таблица.SubProductGuid КАК SubProductGuid,
	|	_Таблица.Номенклатура КАК Номенклатура,
	|	_Таблица.ProductItemGuid КАК ProductItemGuid,
	|	_Таблица.Количество КАК Количество,
	|	_Таблица.КоличествоМест КАК КоличествоМест,
	|	_Таблица.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	_Таблица.Упаковка КАК Упаковка
	|ИЗ
	|	Документ.ВетисВходящаяПартияСводно.Товары КАК _Таблица
	|ГДЕ
	|	_Таблица.Ссылка = &Ссылка";
	
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	НаборДвижений = Движения.ВетисСкладскойЖурнал;
	
	НаборДвижений.Записывать = Истина;
	
	Пока Выборка.Следующий() Цикл
		НаборДвиженийСтрока = НаборДвижений.Добавить();
		НаборДвиженийСтрока.ВидДвижения = ВидДвиженияНакопления.Приход;
		ЗаполнитьЗначенияСвойств(НаборДвиженийСтрока, Выборка);
	КонецЦикла;
	
КонецПроцедуры
