
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	#Если МобильноеПриложениеСервер Тогда
		Элементы.СписокНастройкиХСКомандаОсновнойХС.Видимость = Ложь;
	#КонецЕсли
	
	ВерсияAPI                = Ветис.Версия();
	Тестовый                 = Ветис.Настройки_Тестовый();
	Сервис                   = Ветис.Настройки_Сервис();
	Отладка                  = Ветис.РазрешенаОтладка();
	ОсновнойХС               = Ветис.Настройки_ОсновнойХС();
	СоздаватьХС              = Ветис.Настройки_СоздаватьХС();
	СоздаватьПредприятия     = Ветис.Настройки_СоздаватьПредприятия();
	ПоказыватьGuid           = Ветис.Настройки_ПоказыватьGuid();
	СправочникПродукцииЛокально = Ветис.Настройки_СправочникПродукцииЛокально();
	ВремяОжиданияОтвета      = Ветис.Настройки_ВремяОжиданияОтвета();
	Интеграция               = Ветис.Настройки_Интеграция();
	
	МногоуровневаяУпаковка   = Ветис.Настройки_МногоуровневаяУпаковка();
	УровеньУпаковки          = Ветис.Настройки_УровеньУпаковки();
	КлассМаркировки          = Ветис.Настройки_КлассМаркировки();
	ЛабораторныеИсследования = Ветис.Настройки_ЛабораторныеИсследования();
	Мероприятия              = Ветис.Настройки_Мероприятия();
	МультимодальныеПеревозки = Ветис.Настройки_МультимодальныеПеревозки();
	УсловияПеремещения       = Ветис.Настройки_УсловияПеремещения();
	
	ВСД_БлагополучиеМестности = Ветис.Настройки_ВСД_БлагополучиеМестности();
	ВСД_ВСЭ                   = Ветис.Настройки_ВСД_ВСЭ();
	ВСД_КонтрольГосВетврачем  = Ветис.Настройки_ВСД_КонтрольГосВетврачем();
	ВСД_НазначениеГруза       = Ветис.Настройки_ВСД_НазначениеГруза();
	ВСД_ОсобыеОтметки         = Ветис.Настройки_ВСД_ОсобыеОтметки();
	
	НастроитьУФ(ОсновнойХС);
	
	УстановитьВидимость();
	
КонецПроцедуры

&НаСервере
Процедура КомандаГотовоНаСервере()
	
	Ветис.ВерсияУстановить(ВерсияAPI);
	
	Ветис.РазрешенаОтладка(Отладка);
	
	Ветис.Настройки_Тестовый(Тестовый);
	Ветис.Настройки_Сервис(Сервис);
	Ветис.Настройки_ОсновнойХС(ОсновнойХС);
	Ветис.Настройки_СоздаватьХС(СоздаватьХС);
	Ветис.Настройки_СоздаватьПредприятия(СоздаватьПредприятия);
	Ветис.Настройки_ПоказыватьGuid(ПоказыватьGuid);
	Ветис.Настройки_СправочникПродукцииЛокально(СправочникПродукцииЛокально);
	Ветис.Настройки_ВремяОжиданияОтвета(ВремяОжиданияОтвета);
	Ветис.Настройки_Интеграция(Интеграция);
	
	Ветис.Настройки_МногоуровневаяУпаковка(МногоуровневаяУпаковка);
	Ветис.Настройки_УровеньУпаковки(УровеньУпаковки);
	Ветис.Настройки_КлассМаркировки(КлассМаркировки);
	Ветис.Настройки_ЛабораторныеИсследования(ЛабораторныеИсследования);
	Ветис.Настройки_Мероприятия(Мероприятия);
	Ветис.Настройки_МультимодальныеПеревозки(МультимодальныеПеревозки);
	Ветис.Настройки_УсловияПеремещения(УсловияПеремещения);
	
	Ветис.Настройки_ВСД_БлагополучиеМестности(ВСД_БлагополучиеМестности);
	Ветис.Настройки_ВСД_ВСЭ(ВСД_ВСЭ);
	Ветис.Настройки_ВСД_КонтрольГосВетврачем(ВСД_КонтрольГосВетврачем);
	Ветис.Настройки_ВСД_НазначениеГруза(ВСД_НазначениеГруза);
	Ветис.Настройки_ВСД_ОсобыеОтметки(ВСД_ОсобыеОтметки);
	
	Ветис.ИнициализироватьXSD();
	
	Ветис.ИнициализироватьНастройкиХС();
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаГотово(Команда)
	
	КомандаГотовоНаСервере();
	
	Оповестить("ВетисНастройки");
	
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОсновнойХС(Команда)
	
	ОсновнойХС = Элементы.СписокНастройкиХС.ТекущиеДанные.ХозяйствующийСубъект;
	
	НастроитьУФ(ОсновнойХС);
	
	Элементы.СписокНастройкиХС.Обновить();
	
КонецПроцедуры


&НаСервере
Процедура НастроитьУФ(ТекЭлемент)
	
	ЭтаФорма.УсловноеОформление.Элементы[0].Отбор.Элементы[0].ПравоеЗначение = ТекЭлемент;
	
КонецПроцедуры

&НаКлиенте
Процедура МногоуровневаяУпаковкаПриИзменении(Элемент)
	
	УстановитьВидимость();
	
КонецПроцедуры

&НаСервере
Процедура УстановитьВидимость(пИмяСобытия = Неопределено)
	
	Элементы.УровеньУпаковки.Видимость = НЕ МногоуровневаяУпаковка;
	Элементы.КлассМаркировки.Видимость = НЕ МногоуровневаяУпаковка;
	
КонецПроцедуры
