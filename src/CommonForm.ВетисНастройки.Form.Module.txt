
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	#Если МобильноеПриложениеСервер Тогда
		Элементы.СписокНастройкиХСКомандаОсновнойХС.Видимость = Ложь;
	#КонецЕсли
	
	ВерсияAPI = Ветис.Версия();
	
	Тестовый = Ветис.Тестовый();
	
	Сервис = Ветис.Сервис();
	
	Отладка = Ветис.РазрешенаОтладка();
	
	ОсновнойХС = Ветис.ОсновнойХС();
	
	СоздаватьХС = Ветис.СоздаватьХС();
	
	СоздаватьПредприятия = Ветис.СоздаватьПредприятия();
	
	ПоказыватьGuid = Ветис.ПоказыватьGuid();
	
	НастроитьУФ(ОсновнойХС);
	
КонецПроцедуры

&НаСервере
Процедура КомандаГотовоНаСервере()
	
	Ветис.ТестовыйУстановить(Тестовый);
	
	Ветис.СервисУстановить(Сервис);
	
	Ветис.ВерсияУстановить(ВерсияAPI);
	
	Ветис.РазрешенаОтладка(Отладка);
	
	Ветис.СоздаватьХС(СоздаватьХС);
	
	Ветис.СоздаватьПредприятия(СоздаватьПредприятия);
	
	Ветис.ПоказыватьGuid(ПоказыватьGuid);
	
	Ветис.ИнициализироватьXSD();
	
	Ветис.ОсновнойХСУстановить(ОсновнойХС);
	
	Ветис.ИнициализироватьНастройкиХС();
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаГотово(Команда)
	
	КомандаГотовоНаСервере();
	
	Оповестить("ВетисВерсия", "Настройки");
	
	Оповестить("ВетисОтладка", "Настройки");
	
	Оповестить("ВетисТестовый", "Настройки");
	
	Оповестить("ВетисПоказыватьGuid", "Настройки");
	
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОсновнойХС(Команда)
	
	ОсновнойХС = Элементы.СписокНастройкиХС.ТекущиеДанные.ХозяйствующийСубъект;
	
	НастроитьУФ(ОсновнойХС);
	
	Элементы.СписокНастройкиХС.Обновить();
	
КонецПроцедуры


&НаСервере
Процедура НастроитьУФ(ТекЭлемент)
	
	ЭтаФорма.УсловноеОформление.Элементы[0].Отбор.Элементы[0].ПравоеЗначение = ТекЭлемент;
	
КонецПроцедуры
