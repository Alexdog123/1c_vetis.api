
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	#Если МобильноеПриложениеСервер Тогда
		Элементы.СписокНастройкиХСКомандаОсновнойХС.Видимость = Ложь;
	#КонецЕсли
	
	ВерсияAPI = Ветис.Версия();
	
	Тестовый = Ветис.Тестовый();
	
	Сервис = Ветис.Сервис();
	
	Отладка = Ветис.РазрешенаОтладка();
	
	ОсновнойХС = Ветис.ОсновнойХС();
	
	СоздаватьХС              = Ветис.Настройки_Получить("СоздаватьХС", Ложь);
	СоздаватьПредприятия     = Ветис.Настройки_Получить("СоздаватьПредприятия", Ложь);
	ПоказыватьGuid           = Ветис.Настройки_Получить("ПоказыватьGuid", Ложь);
	МногоуровневаяУпаковка   = Ветис.Настройки_Получить("МногоуровневаяУпаковка", Ложь);
	УровеньУпаковки          = Ветис.Настройки_Получить("УровеньУпаковки", Перечисления.ВетисPackageLevelType.Транспортный);
	КлассМаркировки          = Ветис.Настройки_Получить("КлассМаркировки");
	ЛабораторныеИсследования = Ветис.Настройки_Получить("ЛабораторныеИсследования", Ложь);
	Мероприятия              = Ветис.Настройки_Получить("Мероприятия", Ложь);
	МультимодальныеПеревозки = Ветис.Настройки_Получить("МультимодальныеПеревозки", Ложь);
	УсловияПеремещения       = Ветис.Настройки_Получить("УсловияПеремещения", Ложь);
	
	НастроитьУФ(ОсновнойХС);
	
	УстановитьВидимость();
	
КонецПроцедуры

&НаСервере
Процедура КомандаГотовоНаСервере()
	
	Ветис.ТестовыйУстановить(Тестовый);
	
	Ветис.СервисУстановить(Сервис);
	
	Ветис.ВерсияУстановить(ВерсияAPI);
	
	Ветис.РазрешенаОтладка(Отладка);
	
	Ветис.Настройки_Установить("СоздаватьХС",              СоздаватьХС);
	Ветис.Настройки_Установить("СоздаватьПредприятия",     СоздаватьПредприятия);
	Ветис.Настройки_Установить("ПоказыватьGuid",           ПоказыватьGuid);
	Ветис.Настройки_Установить("МногоуровневаяУпаковка",   МногоуровневаяУпаковка);
	Ветис.Настройки_Установить("УровеньУпаковки",          УровеньУпаковки);
	Ветис.Настройки_Установить("КлассМаркировки",          КлассМаркировки);
	Ветис.Настройки_Установить("ЛабораторныеИсследования", ЛабораторныеИсследования);
	Ветис.Настройки_Установить("Мероприятия",              Мероприятия);
	Ветис.Настройки_Установить("МультимодальныеПеревозки", МультимодальныеПеревозки);
	Ветис.Настройки_Установить("УсловияПеремещения",       УсловияПеремещения);
	
	Ветис.ИнициализироватьXSD();
	
	Ветис.ОсновнойХСУстановить(ОсновнойХС);
	
	Ветис.ИнициализироватьНастройкиХС();
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаГотово(Команда)
	
	КомандаГотовоНаСервере();
	
	Оповестить("ВетисВерсия", "Настройки");
	
	Оповестить("ВетисОтладка", "Настройки");
	
	Оповестить("ВетисТестовый", "Настройки");
	
	Оповестить("ВетисПоказыватьGuid", "Настройки");
	
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОсновнойХС(Команда)
	
	ОсновнойХС = Элементы.СписокНастройкиХС.ТекущиеДанные.ХозяйствующийСубъект;
	
	НастроитьУФ(ОсновнойХС);
	
	Элементы.СписокНастройкиХС.Обновить();
	
КонецПроцедуры


&НаСервере
Процедура НастроитьУФ(ТекЭлемент)
	
	ЭтаФорма.УсловноеОформление.Элементы[0].Отбор.Элементы[0].ПравоеЗначение = ТекЭлемент;
	
КонецПроцедуры

&НаКлиенте
Процедура МногоуровневаяУпаковкаПриИзменении(Элемент)
	
	УстановитьВидимость();
	
КонецПроцедуры

&НаСервере
Процедура УстановитьВидимость(пИмяСобытия = Неопределено)
	
	Элементы.УровеньУпаковки.Видимость = НЕ МногоуровневаяУпаковка;
	Элементы.КлассМаркировки.Видимость = НЕ МногоуровневаяУпаковка;
	
КонецПроцедуры
