
Функция ProductType(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.ProductItem("СправочникСсылка")) Тогда
		Возврат ?(ВетисXSD.Версия_2_0(), ВетисProductService_2_0, ВетисProductService).GetProductItemByGuid(value.guid).productType;
		
	ИначеЕсли ТипЗнч(value) = Тип(ВетисИмяСправочника.ProductType("ПеречислениеСсылка")) Тогда
		Если      value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","МясоИМясопродукты")) Тогда
			Возврат ВетисКонстанты.ProductType_МясоИМясопродукты();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","КормаИКормовыеДобавки")) Тогда
			Возврат ВетисКонстанты.ProductType_КормаИКормовыеДобавки();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЖивыеЖивотные")) Тогда
			Возврат ВетисКонстанты.ProductType_ЖивыеЖивотные();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЛекарственныеСредства")) Тогда
			Возврат ВетисКонстанты.ProductType_ЛекарственныеСредства();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПищевыеПродукты")) Тогда
			Возврат ВетисКонстанты.ProductType_ПищевыеПродукты();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","НепищевыеПродуктыИДругое")) Тогда
			Возврат ВетисКонстанты.ProductType_НепищевыеПродуктыИДругое();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","РыбаИМорепродукты")) Тогда
			Возврат ВетисКонстанты.ProductType_РыбаИМорепродукты();
		ИначеЕсли value = ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПродукцияНеТребующаяРазрешения")) Тогда
			Возврат ВетисКонстанты.ProductType_НепищевыеПродуктыИДругое();
		Иначе
			Возврат ПоУмолчанию;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.ProductType_МясоИМясопродукты() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","МясоИМясопродукты"));
		ИначеЕсли value = ВетисКонстанты.ProductType_КормаИКормовыеДобавки() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","КормаИКормовыеДобавки"));
		ИначеЕсли value = ВетисКонстанты.ProductType_ЖивыеЖивотные() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЖивыеЖивотные"));
		ИначеЕсли value = ВетисКонстанты.ProductType_ЛекарственныеСредства() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ЛекарственныеСредства"));
		ИначеЕсли value = ВетисКонстанты.ProductType_ПищевыеПродукты() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПищевыеПродукты"));
		ИначеЕсли value = ВетисКонстанты.ProductType_НепищевыеПродуктыИДругое() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","НепищевыеПродуктыИДругое"));
		ИначеЕсли value = ВетисКонстанты.ProductType_РыбаИМорепродукты() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","РыбаИМорепродукты"));
		ИначеЕсли value = ВетисКонстанты.ProductType_ПродукцияНеТребующаяРазрешения() Тогда
			Возврат ПредопределенноеЗначение(ВетисИмяСправочника.ProductType("Перечисление","ПродукцияНеТребующаяРазрешения"));
		Иначе
			Возврат ПоУмолчанию;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции

Функция Product(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.Product("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(value, ПоУмолчанию);
	ИначеЕсли ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(value.guid, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(value, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция SubProduct(value, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип(ВетисИмяСправочника.SubProduct("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(value, ПоУмолчанию);
	ИначеЕсли ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(value.guid, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(value, ВетисИмяСправочника.SubProduct("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция ProductItem(value, ХозяйствующийСубъект, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		Если ЗначениеЗаполнено(value.guid) Тогда
			Возврат ВетисСоответствие.ПолучитьProductItem(value.guid, ХозяйствующийСубъект, ПоУмолчанию);
		Иначе
			Возврат ВетисСоответствие.ПолучитьProductItem(value.name, ХозяйствующийСубъект, ПоУмолчанию);
		КонецЕсли;
	Иначе
		Возврат ВетисСоответствие.ПолучитьProductItem(value, ХозяйствующийСубъект, ПоУмолчанию);
	КонецЕсли;
	
КонецФункции
