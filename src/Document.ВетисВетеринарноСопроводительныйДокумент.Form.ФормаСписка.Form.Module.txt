
&НаКлиенте
Процедура КомандаСинхронизировать(Команда)
	
	Перем _Отказ, _Ошибка;
	
	ВетисХозяйственныеОперации.СинхронизироватьЖурналВСД(,,,,_Отказ, _Ошибка);
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
	КонецЕсли;
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаАннулировать(Команда)
	
	_ТекущиеДанные = Элементы.Список.ТекущиеДанные;
	
	Если _ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	_Причина = "";
	
	Если НЕ ВвестиСтроку(_Причина, "Причина аннулирования " + _ТекущиеДанные.Ссылка) Тогда
		Возврат;
	КонецЕсли;
	
	ВетисMercuryVetdocumentСлой1с.Аннулировать(_ТекущиеДанные.Ссылка, _Причина);
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаУдалитьПомеченные(Команда)
	
	ВетисОбщегоНазначения.УдалитьПомеченныеОбъекты("Документ.ВетисВетеринарноСопроводительныйДокумент");
	
	Элементы.Список.Обновить();
	
КонецПроцедуры


&НаКлиенте
Процедура СписокПриАктивизацииСтроки(Элемент)
	
	_ТекущиеДанные = Элементы.Список.ТекущиеДанные;
	
	Если _ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Элементы.ФормаАннулировать.Доступность =  ЗначениеЗаполнено(_ТекущиеДанные.uuid)
		И _ТекущиеДанные.Тип = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentType.Транспортный")
		И _ТекущиеДанные.Статус = ПредопределенноеЗначение("Перечисление.ВетисVetDocumentStatus.Оформлен");
	
КонецПроцедуры
