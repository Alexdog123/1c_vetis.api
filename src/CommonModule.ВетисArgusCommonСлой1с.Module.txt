
Функция Unit(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип(ВетисИмяСправочника.Unit("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(пСсылка, ПоУмолчанию);
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка.guid, ВетисИмяСправочника.Unit("Справочник"), ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка, ВетисИмяСправочника.Unit("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция PackingForm(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип(ВетисИмяСправочника.PackingForm("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(пСсылка, ПоУмолчанию);
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") Тогда
		Если НЕ пСсылка.Свойства().Получить("uuid") = Неопределено Тогда
			Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка.uuid, ВетисИмяСправочника.PackingForm("Справочник"), ПоУмолчанию);
		ИначеЕсли НЕ пСсылка.Свойства().Получить("packingForm") = Неопределено И ТипЗнч(пСсылка.packingForm) = Тип("СписокXDTO") И пСсылка.packingForm.Количество() > 0 Тогда
			Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка.packingForm[0].uuid, ВетисИмяСправочника.PackingForm("Справочник"), ПоУмолчанию);
		КонецЕсли;
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка, ВетисИмяСправочника.PackingForm("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция Purpose(пСсылка, ПоУмолчанию = Неопределено) Экспорт
	
	Если ТипЗнч(пСсылка) = Тип(ВетисИмяСправочника.Purpose("СправочникСсылка")) Тогда
		Возврат ВетисСоответствие.ПолучитьGuid(пСсылка, ПоУмолчанию);
	ИначеЕсли ТипЗнч(пСсылка) = Тип("ОбъектXDTO") Тогда
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка.guid, ВетисИмяСправочника.Purpose("Справочник"), ПоУмолчанию);
	Иначе
		Возврат ВетисСоответствие.ПолучитьСсылку(пСсылка, ВетисИмяСправочника.Purpose("Справочник"), ПоУмолчанию);
	КонецЕсли;
	
КонецФункции

Функция DocumentNature(value) Экспорт
	
	Если ТипЗнч(value) = Тип("ПеречислениеСсылка.ВетисDocumentNature") Тогда
		Если      value = ПредопределенноеЗначение("Перечисление.ВетисDocumentNature.ELECTRONIC") Тогда
			Возврат ВетисКонстанты.DocumentNature_ELECTRONIC();
		ИначеЕсли value = ПредопределенноеЗначение("Перечисление.ВетисDocumentNature.PAPER") Тогда
			Возврат ВетисКонстанты.DocumentNature_PAPER();
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	Иначе
		Если      value = ВетисКонстанты.DocumentNature_ELECTRONIC() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDocumentNature.ELECTRONIC");
		ИначеЕсли value = ВетисКонстанты.DocumentNature_PAPER() Тогда
			Возврат ПредопределенноеЗначение("Перечисление.ВетисDocumentNature.PAPER");
		Иначе
			Возврат Неопределено;
		КонецЕсли;
	КонецЕсли;
	
КонецФункции
