
Процедура ПриКопировании(ОбъектКопирования)
	
	uuid = Неопределено;
	
	СерияВСД = Неопределено;
	НомерВСД = Неопределено;
	ДатаВСД = ТекущаяДата();
	Статус = Неопределено;
	Тип = Неопределено;
	
	ТТН[0].Серия = Неопределено;
	ТТН[0].Номер = Неопределено;
	ТТН[0].Дата = ТекущаяДата();
	
КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	ДатаВСД = ТекущаяДата();
	
	_строкаТовары = Товары.Добавить();
	
	_строкаТовары.КлючСтроки = 1;
	
	//v1.4
	_строкаВСД = ВСД.Добавить();
	
	_строкаВСД.НазначениеГруза = Ветис.Настройки_ВСД_НазначениеГруза();
	
	_строкаВСД.БлагополучиеМестности = Ветис.Настройки_ВСД_БлагополучиеМестности();
	
	_строкаВСД.КонтрольГосВетврачем = Ветис.Настройки_ВСД_КонтрольГосВетврачем();
	
	_строкаВСД.ОсобыеОтметки = Ветис.Настройки_ВСД_ОсобыеОтметки();
	
	//v2.0
	_строкаВСД = РезультатыОсмотра.Добавить();
	
	_строкаВСД.НазначениеГруза = Ветис.Настройки_ВСД_НазначениеГруза();
	
	_строкаВСД.БлагополучиеМестности = Ветис.Настройки_ВСД_БлагополучиеМестности();
	
	_строкаВСД.Ветсанэкспертиза = Ветис.Настройки_ВСД_ВСЭ();
	
	_строкаВСД.КонтрольГосВетврачем = Ветис.Настройки_ВСД_КонтрольГосВетврачем();
	
	_строкаВСД.ОсобыеОтметки = Ветис.Настройки_ВСД_ОсобыеОтметки();
	
	//v1.4, v2.0
	_строкаТТН = ТТН.Добавить();
	
	_строкаТТН.Дата = ТекущаяДата();
	
	_строкаТТН.Транспорт = Ветис.Настройки_ТТН_Транспорт();
	
	Если ЗначениеЗаполнено(_строкаТТН.Транспорт) Тогда
		_строкаТТН.Тип            = _строкаТТН.Транспорт.ТипТранспорта;
		_строкаТТН.Посредник      = _строкаТТН.Транспорт.Перевозчик;
		_строкаТТН.СпособХранения = _строкаТТН.Транспорт.СпособХранения;
	Иначе
		_строкаТТН.Тип            = Ветис.Настройки_ТТН_Тип();
		_строкаТТН.Посредник      = Ветис.Настройки_ТТН_Посредник();
		_строкаТТН.СпособХранения = Ветис.Настройки_ТТН_СпособХранения();
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если НЕ ДополнительныеСвойства.Свойство("Загрузка") И ЗначениеЗаполнено(uuid) И НЕ Ветис.РазрешенаОтладка() Тогда
		Отказ = Истина;
	КонецЕсли;
	
	Если Товары.Количество() = 1 Тогда
		НоменклатурнаяГруппа = Товары[0].НоменклатурнаяГруппа;
		Номенклатура = Товары[0].Номенклатура;
		Количество   = Товары[0].Количество;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
КонецПроцедуры

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
КонецПроцедуры
